<html>
  <%- include('../../include/header.ejs') %>

  <body>
    <%- include('../../include/navbar.ejs') %>

    <br />
    <br />

    <h1 class="title is-1">Empleados</h1>
    <div class="container is-marginless">
      <div class="columns is-multiline">
        <div class="column is-three-quarters">
          <div class="columns is-multiline">
            <% for(let i = 0; i< empleados.length; i++){ %>
            <div class="column is-6">
              <div class="box boxEmpleado m-2 p-2">
                <div
                  class="empleadoContainer is-flex is-vcentered is-justify-content-space-around mt-4"
                >
                  <img
                    src="<%= empleados[i].googleProfilePicture %>"
                    alt="Profile Picture"
                    class="image is-64x64 is-rounded profilePicture"
                  />
                  <div class="dataContainer">
                    <p>
                      <%= empleados[i].primerNombre + " " +
                      empleados[i].apellidoPaterno %>
                    </p>
                    <p><%= empleados[i].googleEmail %></p>

                    <% for(let j = 0; j < rolesEmpleados.length; j++) {%> <%
                    if(empleados[i].idEmpleado == rolesEmpleados[j].idEmpleado){
                    %> <% for(let k = 0; k < roles.length; k++){%> <%
                    if(rolesEmpleados[j].idRol == roles[k].idRol){ %>
                    <p><%= roles[k].nombreRol %></p>

                    <% } %> <% } %> <% } %> <% } %>
                  </div>
                </div>
              </div>
            </div>
            <% } %>
          </div>
        </div>

        <div class="column is-one-quarter">
          <section class="optionsContainer">
            <section>
              <div class="box boxAddEmail">
                <p class="subtitle">Agregar correo</p>
                <form
                  class="mt-3 is-flex is-flex-direction-column is-justify-content-space-evenly"
                >
                  <input
                    class="input"
                    type="text"
                    placeholder="Correo@zeb.mx"
                  />
                  <br />

                  <button
                    type="submit"
                    class="plusButton button is-primary is-rounded m-2"
                  >
                    <span class="icon">
                      <i class="fas fa-plus"></i>
                    </span>
                  </button>
                </form>
              </div>
            </section>
            <section class="mt-6">
              <!-- gestionar roles -->
              <% if(idEmpleado == -1){ %>
              <div class="box boxAddEmail">
                <p class="subtitle">Gestionar roles</p>
                <div class="mt-3 is-flex is-flex-direction-column
                is-justify-content-space-evenly" >
                <!-- Select empleado -->
                <p class="mb-2">Selecciona Empleado</p>
                <div class="select">
                  <select class="mb-3">
                    <!-- title -->

                    <option class="mb-2">Empleado</option>
                    <% for(let i = 0; i< empleados.length; i++){ %>
                    <option>
                      <%= empleados[i].primerNombre + " " +
                      empleados[i].apellidoPaterno %>
                    </option>
                    <% } %>
                  </select>
                  <!-- Select Rol -->
                  <p class="mb-2">Seleccionar Rol</p>
                  <div class="select">
                    <select>
                      <option>Rol</option>
                      <% for(let i = 0; i< roles.length; i++){ %>
                      <option><%= roles[i].nombreRol %></option>
                      <% } %>
                    </select>
                  </div>
                </div>
              </div>
              <% }else{ %>
              <div class="box boxAddEmail">
                <p class="subtitle">Gestionar roles</p>
                <div class="mt-3 is-flex is-flex-direction-column
                is-justify-content-space-evenly" >
                <!-- Select empleado -->
                <p class="mb-2">Selecciona Empleado</p>
                <div class="select">
                  <select class="mb-3">
                    <!-- title -->

                    <option
                      class="mb-2"
                      value="<%= empleado.primerNombre + empleado.apellidoPaterno %>"
                    >
                      Empleado
                    </option>
                    <% for(let i = 0; i< empleados.length; i++){ %>
                    <option
                      href="/editar/addusuario/ <%= empleados[i].idEmpleado %>"
                    >
                      <%= empleados[i].primerNombre + " " +
                      empleados[i].apellidoPaterno %>
                    </option>
                    <% } %>
                  </select>
                  <!-- Select Rol -->
                  <p class="mb-2">Seleccionar Rol</p>
                  <div class="select">
                    <select>
                      <option>Rol</option>
                      <% for(let i = 0; i< roles.length; i++){ %>
                      <option><%= roles[i].nombreRol %></option>
                      <% } %>
                    </select>
                  </div>
                </div>
              </div>
              <% } %>
            </section>
          </section>
        </div>
      </div>
    </div>
  </body>
</html>

<style>
  body {
    padding: 4rem;
  }

  .empleadoContainer {
    width: 100%;
  }

  .Container {
    width: 75%;
    margin-left: 9% !important;
    margin-top: 8px !important;
  }

  .boxEmpleado {
    height: 120px;
  }

  .mainContainer {
    width: 100%;
    height: 100vh;
    display: flex;
  }

  /* Set the styles for the first child div (two-thirds width) */
  .container .left {
    flex: 2;
  }

  .container .right {
    flex: 1;
  }

  .boxAddEmail {
    height: 18rem;
  }

  .plusButton {
    width: 50px;
    height: 50px;
    align-self: center;
  }
</style>
